<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NestJS æ¨¡å—ç³»ç»Ÿè¯¦è§£</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f8f9fa;
      }

      .container {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        min-height: 100vh;
      }

      .sidebar {
        width: 280px;
        background: #fff;
        border-right: 1px solid #e9ecef;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        padding: 20px;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }

      .sidebar h3 {
        color: #e74c3c;
        margin-bottom: 20px;
        font-size: 18px;
        border-bottom: 2px solid #e74c3c;
        padding-bottom: 10px;
      }

      .toc {
        list-style: none;
      }

      .toc li {
        margin-bottom: 8px;
      }

      .toc a {
        color: #495057;
        text-decoration: none;
        padding: 8px 12px;
        display: block;
        border-radius: 6px;
        transition: all 0.3s ease;
        font-size: 14px;
      }

      .toc a:hover {
        background-color: #f8f9fa;
        color: #e74c3c;
        transform: translateX(5px);
      }

      .toc .level-2 {
        margin-left: 20px;
        font-size: 13px;
      }

      .main-content {
        flex: 1;
        margin-left: 280px;
        padding: 40px;
        background: #fff;
        margin-right: 20px;
        margin-top: 20px;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 3px solid #e74c3c;
      }

      .header h1 {
        color: #2c3e50;
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        color: #7f8c8d;
        font-size: 1.1em;
      }

      .section {
        margin-bottom: 40px;
        scroll-margin-top: 20px;
      }

      .section h2 {
        color: #e74c3c;
        font-size: 1.8em;
        margin-bottom: 20px;
        padding-left: 15px;
        border-left: 4px solid #e74c3c;
      }

      .section h3 {
        color: #34495e;
        font-size: 1.4em;
        margin: 25px 0 15px 0;
      }

      .section p {
        margin-bottom: 15px;
        text-align: justify;
        line-height: 1.8;
      }

      .highlight-box {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .highlight-box h3 {
        color: white;
        margin-top: 0;
      }

      .code-block {
        margin: 20px 0;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .code-header {
        background: #2d3748;
        color: #e2e8f0;
        padding: 12px 20px;
        font-size: 14px;
        font-weight: 500;
      }

      pre {
        margin: 0 !important;
        border-radius: 0 !important;
      }

      pre code {
        font-size: 14px;
        line-height: 1.5;
      }

      .file-structure {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        line-height: 1.6;
      }

      .file-structure .folder {
        color: #3498db;
        font-weight: bold;
      }

      .file-structure .file {
        color: #2ecc71;
      }

      .warning {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-left: 4px solid #f39c12;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
      }

      .warning strong {
        color: #e67e22;
      }

      .tip {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        border-left: 4px solid #17a2b8;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
      }

      .tip strong {
        color: #138496;
      }

      ol,
      ul {
        margin: 15px 0;
        padding-left: 30px;
      }

      li {
        margin-bottom: 8px;
      }

      .emoji {
        font-size: 1.2em;
        margin-right: 8px;
      }

      @media (max-width: 768px) {
        .container {
          flex-direction: column;
        }

        .sidebar {
          position: relative;
          width: 100%;
          height: auto;
        }

        .main-content {
          margin-left: 0;
          margin: 10px;
          padding: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav class="sidebar">
        <h3>ğŸ“š ç›®å½•å¯¼èˆª</h3>
        <ul class="toc">
          <li><a href="#what-is-module">æ¨¡å—æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
          <li><a href="#module-decorator">@Module() è£…é¥°å™¨çš„æ ¸å¿ƒé…ç½®</a></li>
          <li><a href="#create-feature-module">ğŸŒ° åˆ›å»ºåŠŸèƒ½æ¨¡å—</a></li>
          <li><a href="#module-sharing">æ¨¡å—é—´çš„å…±äº«ï¼šexports</a></li>
          <li><a href="#module-reexport">æ¨¡å—é‡æ–°å¯¼å‡º</a></li>
          <li><a href="#module-di">æ¨¡å—çš„ä¾èµ–æ³¨å…¥</a></li>
          <li><a href="#global-module">å…¨å±€æ¨¡å—</a></li>
          <li>
            <a href="#dynamic-module">åŠ¨æ€æ¨¡å—</a>
            <ul>
              <li>
                <a href="#dynamic-usage" class="level-2">åŠ¨æ€æ¨¡å—çš„ä½¿ç”¨</a>
              </li>
              <li>
                <a href="#dynamic-reexport" class="level-2"
                  >åŠ¨æ€æ¨¡å—çš„é‡æ–°å¯¼å‡º</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </nav>

      <main class="main-content">
        <div class="header">
          <h1>NestJS æ¨¡å—ç³»ç»Ÿè¯¦è§£</h1>
          <p>æ·±å…¥ç†è§£ NestJS ä¸­æ¨¡å—çš„æ¦‚å¿µã€é…ç½®å’Œé«˜çº§ç”¨æ³•</p>
        </div>

        <section id="what-is-module" class="section">
          <h2>æ¨¡å—æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
          <p>
            æ¨¡å—å°±æ˜¯ä¸€ä¸ªç”¨ <code>@Module()</code> è£…é¥°å™¨æ ‡è®°çš„ TypeScript
            ç±»ã€‚è¿™ä¸ªè£…é¥°å™¨ä¸ä»…ä»…æ˜¯ä¸ªæ ‡è®°ï¼Œå®ƒè¿˜æä¾›äº†ä¸°å¯Œçš„å…ƒæ•°æ®ï¼Œå¸®åŠ© Nest
            æ¡†æ¶ç†è§£åº”ç”¨çš„æ•´ä½“ç»“æ„ï¼Œå¹¶é«˜æ•ˆåœ°ç®¡ç†å„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚
          </p>

          <p>
            æ¯ä¸ª Nest åº”ç”¨éƒ½æœ‰ä¸€ä¸ªæ ¹æ¨¡å—ï¼ˆé€šå¸¸å«
            AppModuleï¼‰ï¼Œå®ƒæ˜¯æ•´ä¸ªåº”ç”¨çš„å…¥å£ç‚¹ã€‚æ¡†æ¶ä¼šä»è¿™é‡Œå¼€å§‹æ„å»ºæ•´ä¸ªåº”ç”¨çš„ä¾èµ–å…³ç³»å›¾ã€‚
          </p>

          <p>
            è™½ç„¶å°é¡¹ç›®å¯èƒ½åªéœ€è¦ä¸€ä¸ªæ ¹æ¨¡å—å°±å¤Ÿäº†ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŒ‰ç…§åŠŸèƒ½åˆ’åˆ†åˆ›å»ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ä¸€å—ç›¸å¯¹ç‹¬ç«‹çš„ä¸šåŠ¡é€»è¾‘ã€‚
          </p>
        </section>

        <section id="module-decorator" class="section">
          <h2>@Module() è£…é¥°å™¨çš„æ ¸å¿ƒé…ç½®</h2>
          <p>
            <code>@Module()</code> è£…é¥°å™¨æ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒåŒ…å«å››ä¸ªå…³é”®å±æ€§ï¼š
          </p>

          <ol>
            <li>
              <strong>providers</strong>:
              å­˜æ”¾æœåŠ¡å’Œå…¶ä»–å¯æ³¨å…¥çš„å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åœ¨æ¨¡å—å†…éƒ¨ä½¿ç”¨
            </li>
            <li>
              <strong>controllers</strong>: åˆ—å‡ºå½“å‰æ¨¡å—éœ€è¦å®ä¾‹åŒ–çš„æ§åˆ¶å™¨
            </li>
            <li>
              <strong>imports</strong>: å¯¼å…¥å…¶ä»–æ¨¡å—ï¼Œä½¿ç”¨å®ƒä»¬å¯¼å‡ºçš„ providers
            </li>
            <li>
              <strong>exports</strong>: å¯¼å‡ºæœ¬æ¨¡å—çš„
              providersï¼Œè®©å…¶ä»–æ¨¡å—å¯ä»¥ä½¿ç”¨
            </li>
          </ol>

          <div class="warning">
            <strong>æ³¨æ„ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…çš„ providers
            æ˜¯ç§æœ‰çš„ï¼Œåªæœ‰æ˜ç¡®å¯¼å‡ºåæ‰èƒ½è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ã€‚
          </div>
        </section>

        <section id="create-feature-module" class="section">
          <h2><span class="emoji">ğŸŒ°</span>åˆ›å»ºåŠŸèƒ½æ¨¡å—</h2>
          <p>
            å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªå® ç‰©ç®¡ç†ç³»ç»Ÿï¼Œéœ€è¦å¤„ç†çŒ«å’ªç›¸å…³çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„
            CatsModuleï¼š
          </p>

          <div class="code-block">
            <div class="code-header">src/cats/cats.module.ts</div>
            <pre><code class="language-typescript">import { Module } from '@nestjs/common';
import { CatsController } from './cats.controller';
import { CatsService } from './cats.service';

@Module({
  controllers: [CatsController], // å£°æ˜æ§åˆ¶å™¨
  providers: [CatsService],      // å£°æ˜æœåŠ¡
})
export class CatsModule {}</code></pre>
          </div>

          <p>åˆ›å»ºå¥½æ¨¡å—åï¼Œè®°å¾—åœ¨æ ¹æ¨¡å—ä¸­å¯¼å…¥ï¼š</p>

          <div class="code-block">
            <div class="code-header">src/app.module.ts</div>
            <pre><code class="language-typescript">import { Module } from '@nestjs/common';
import { CatsModule } from './cats/cats.module';

@Module({
  imports: [CatsModule], // æ³¨å†Œ CatsModule
})
export class AppModule {}</code></pre>
          </div>

          <p>è¿™æ ·çš„é¡¹ç›®ç»“æ„çœ‹èµ·æ¥ä¼šå¾ˆæ¸…æ™°ï¼š</p>

          <div class="file-structure">
            <span class="folder">src/</span><br />
            â”œâ”€â”€ <span class="folder">cats/</span><br />
            â”‚ â”œâ”€â”€ <span class="folder">dto/</span><br />
            â”‚ â”‚ â””â”€â”€ <span class="file">create-cat.dto.ts</span><br />
            â”‚ â”œâ”€â”€ <span class="file">cats.controller.ts</span><br />
            â”‚ â”œâ”€â”€ <span class="file">cats.module.ts</span><br />
            â”‚ â””â”€â”€ <span class="file">cats.service.ts</span><br />
            â”œâ”€â”€ <span class="file">app.module.ts</span><br />
            â””â”€â”€ <span class="file">main.ts</span>
          </div>
        </section>

        <section id="module-sharing" class="section">
          <h2>æ¨¡å—é—´çš„å…±äº«ï¼šexports</h2>
          <p>
            NestJS
            ä¸­çš„æ¨¡å—é»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€ä¸ªæœåŠ¡å®ä¾‹å¯ä»¥åœ¨å¤šä¸ªæ¨¡å—é—´å…±äº«ã€‚å¦‚æœä½ æƒ³è®©
            CatsService è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ï¼Œéœ€è¦åœ¨ exports ä¸­å£°æ˜ï¼š
          </p>

          <div class="code-block">
            <div class="code-header">src/cats/cats.module.ts</div>
            <pre><code class="language-typescript">@Module({
  controllers: [CatsController],
  providers: [CatsService],
  exports: [CatsService], // å¯¼å‡ºæœåŠ¡
})
export class CatsModule {}</code></pre>
          </div>

          <div class="tip">
            <strong>æç¤ºï¼š</strong> è¿™æ ·ï¼Œä»»ä½•å¯¼å…¥äº† CatsModule
            çš„æ¨¡å—éƒ½å¯ä»¥æ³¨å…¥ä½¿ç”¨
            CatsServiceï¼Œè€Œä¸”ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚è¿™ä¸ä»…èŠ‚çœå†…å­˜ï¼Œè¿˜èƒ½ä¿è¯çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚
          </div>
        </section>

        <section id="module-reexport" class="section">
          <h2>æ¨¡å—é‡æ–°å¯¼å‡º</h2>
          <p>
            æœ‰æ—¶å€™ä½ å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ª"ä¸­ä»‹"æ¨¡å—ï¼Œå®ƒå¯¼å…¥æŸäº›æ¨¡å—åå†é‡æ–°å¯¼å‡ºï¼Œæ–¹ä¾¿å…¶ä»–æ¨¡å—ç»Ÿä¸€å¯¼å…¥ï¼š
          </p>

          <div class="code-block">
            <div class="code-header">ç¤ºä¾‹ä»£ç </div>
            <pre><code class="language-typescript">import { Module } from '@nestjs/common';
import { CommonModule } from './common.module';

@Module({
  imports: [CommonModule],  // å¯¼å…¥
  exports: [CommonModule],  // é‡æ–°å¯¼å‡º
})
export class CoreModule {}</code></pre>
          </div>

          <p>
            è¿™æ ·å…¶ä»–æ¨¡å—åªéœ€è¦å¯¼å…¥ CoreModuleï¼Œå°±èƒ½é—´æ¥ä½¿ç”¨ CommonModule
            çš„åŠŸèƒ½äº†ã€‚
          </p>
        </section>

        <section id="module-di" class="section">
          <h2>æ¨¡å—çš„ä¾èµ–æ³¨å…¥</h2>
          <p>
            æ¨¡å—ç±»æœ¬èº«ä¹Ÿå¯ä»¥æ³¨å…¥ providersï¼Œè¿™åœ¨éœ€è¦è¿›è¡Œåˆå§‹åŒ–é…ç½®æ—¶å¾ˆæœ‰ç”¨ï¼š
          </p>

          <div class="code-block">
            <div class="code-header">ç¤ºä¾‹ä»£ç </div>
            <pre><code class="language-typescript">// ... å…¶ä»– import
import { CatsService } from './cats.service';

@Module({
  controllers: [CatsController],
  providers: [CatsService],
  exports: [CatsService],
})
export class CatsModule {
  // åœ¨æ„é€ å‡½æ•°ä¸­æ³¨å…¥ CatsService
  constructor(private catsService: CatsService) {
    console.log('CatsModule åˆå§‹åŒ–æ—¶å¯ä»¥æ‹¿åˆ° CatsService å®ä¾‹ï¼');
    // å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›åŸºäº catsService çš„é…ç½®æˆ–æ£€æŸ¥
  }
}</code></pre>
          </div>
        </section>

        <section id="global-module" class="section">
          <h2>å…¨å±€æ¨¡å—</h2>
          <p>
            å¦‚æœæŸä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚é…ç½®æœåŠ¡ã€æ•°æ®åº“è¿æ¥ï¼‰å‡ ä¹æ¯ä¸ªæ¨¡å—éƒ½è¦ç”¨åˆ°ï¼Œä½ å¯ä»¥ç”¨
            <code>@Global()</code> è£…é¥°å™¨å°†å…¶æ ‡è®°ä¸ºå…¨å±€æ¨¡å—ï¼š
          </p>

          <div class="code-block">
            <div class="code-header">ç¤ºä¾‹ä»£ç </div>
            <pre><code class="language-typescript">import { Module, Global } from '@nestjs/common';
import { CatsController } from './cats.controller';
import { CatsService } from './cats.service';

@Global() // åŠ ä¸Šè¿™ä¸ªè£…é¥°å™¨
@Module({
  controllers: [CatsController],
  providers: [CatsService],
  exports: [CatsService],
})
export class CatsModule {}</code></pre>
          </div>

          <p>
            å…¨å±€æ¨¡å—ä¸€æ—¦åœ¨æ ¹æ¨¡å—ä¸­å¯¼å…¥ï¼Œå…¶å¯¼å‡ºçš„ providers
            å°±èƒ½åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä½¿ç”¨ï¼Œæ— éœ€åœ¨æ¯ä¸ªæ¨¡å—ä¸­é‡å¤å¯¼å…¥ã€‚
          </p>

          <div class="warning">
            <strong>æ³¨æ„ï¼š</strong>
            å…¨å±€æ¨¡å—è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¼šé™ä½ä»£ç çš„æ¸…æ™°åº¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜ç¡®åœ°å¯¼å…¥éœ€è¦çš„æ¨¡å—æ˜¯æ›´å¥½çš„å®è·µã€‚
          </div>
        </section>

        <section id="dynamic-module" class="section">
          <h2>åŠ¨æ€æ¨¡å—</h2>
          <p>
            åŠ¨æ€æ¨¡å—æ˜¯ NestJS
            çš„é«˜çº§ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºå¯é…ç½®çš„æ¨¡å—ã€‚æ¯”å¦‚åˆ›å»ºä¸€ä¸ªæ•°æ®åº“æ¨¡å—ï¼Œè®©ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è¿æ¥å‚æ•°ã€‚
          </p>

          <p>
            é€šå¸¸ï¼Œä½ ä¼šå®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼ˆæ¯”å¦‚å« <code>forRoot()</code> æˆ–
            <code>register()</code
            >ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€äº›é…ç½®é€‰é¡¹ï¼Œç„¶åè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„
            <code>DynamicModule</code> å¯¹è±¡ã€‚
          </p>

          <div class="code-block">
            <div class="code-header">database.module.ts (ç®€åŒ–ç¤ºä¾‹)</div>
            <pre><code class="language-typescript">import { Module, DynamicModule } from '@nestjs/common';
import { createDatabaseProviders } from './database.providers'; // å‡è®¾çš„åˆ›å»ºå‡½æ•°
import { Connection } from './connection.provider'; // å‡è®¾çš„åŸºç¡€è¿æ¥æœåŠ¡

@Module({
  providers: [Connection], // æ¨¡å—è‡ªèº«å¯èƒ½æœ‰ä¸€äº›åŸºç¡€çš„ provider
  exports: [Connection],
})
export class DatabaseModule {
  // é™æ€æ–¹æ³•ï¼Œç”¨äºé…ç½®å’Œåˆ›å»ºåŠ¨æ€æ¨¡å—
  static forRoot(entities = [], options?): DynamicModule {
    const providers = createDatabaseProviders(options, entities); // æ ¹æ®é…ç½®åˆ›å»º providers
    return {
      module: DatabaseModule, // æŒ‡å‘å½“å‰æ¨¡å—ç±»
      providers: providers,   // åŠ¨æ€ç”Ÿæˆçš„ providers
      exports: providers,     // ä¹Ÿå¯¼å‡ºè¿™äº›åŠ¨æ€ providers
      // global: true, // å¦‚æœæƒ³è®©å®ƒå˜æˆå…¨å±€åŠ¨æ€æ¨¡å—ï¼Œå¯ä»¥åŠ è¿™ä¸ª (åŒæ ·è¦è°¨æ…)
    };
  }
}</code></pre>
          </div>

          <h3 id="dynamic-usage">åŠ¨æ€æ¨¡å—çš„ä½¿ç”¨</h3>
          <p>ä½¿ç”¨æ—¶å°±åƒè°ƒç”¨æ™®é€šæ–¹æ³•ä¸€æ ·ï¼š</p>

          <div class="code-block">
            <div class="code-header">app.module.ts</div>
            <pre><code class="language-typescript">@Module({
  imports: [
    DatabaseModule.forRoot({
      host: 'localhost',
      port: 5432,
      database: 'myapp'
    }),
  ],
})
export class AppModule {}</code></pre>
          </div>

          <div class="highlight-box">
            <h3>é‡è¦æ¦‚å¿µ</h3>
            <p>
              åŠ¨æ€æ¨¡å—è¿”å›çš„ providers å’Œ exports ä¼šå’Œ @Module()
              è£…é¥°å™¨é‡Œå®šä¹‰çš„åˆå¹¶ï¼ˆè€Œä¸æ˜¯è¦†ç›–ï¼‰ã€‚è¿™è®©ä½ å¯ä»¥åˆ›å»ºå‡ºæ—¢æœ‰å›ºå®šéƒ¨åˆ†ã€åˆæœ‰å¯é…ç½®éƒ¨åˆ†çš„å¼ºå¤§æ¨¡å—ã€‚
            </p>
          </div>

          <h3 id="dynamic-reexport">åŠ¨æ€æ¨¡å—çš„é‡æ–°å¯¼å‡º</h3>
          <p>å¦‚æœä½ æƒ³é‡æ–°å¯¼å‡ºè¿™ä¸ªåŠ¨æ€æ¨¡å—ï¼š</p>

          <div class="code-block">
            <div class="code-header">core.module.ts</div>
            <pre><code class="language-typescript">import { Module } from '@nestjs/common';
import { DatabaseModule } from './database/database.module';
import { User } from './users/entities/user.entity';

@Module({
  imports: [DatabaseModule.forRoot([User])], // åœ¨å†…éƒ¨é…ç½®
  exports: [DatabaseModule], // å¯¼å‡º DatabaseModule ç±»
})
export class CoreModule {}</code></pre>
          </div>

          <p>ç›´æ¥å¯¼å‡ºæ¨¡å—ç±»æœ¬èº«ï¼Œä¸éœ€è¦å¸¦ä¸Š <code>forRoot()</code> è°ƒç”¨ã€‚</p>
        </section>
      </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
      // å¹³æ»‘æ»šåŠ¨
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start',
            });
          }
        });
      });

      // é«˜äº®å½“å‰ç« èŠ‚
      window.addEventListener('scroll', () => {
        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.toc a');

        let current = '';
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (scrollY >= sectionTop - 200) {
            current = section.getAttribute('id');
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove('active');
          if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
          }
        });
      });
    </script>

    <style>
      .toc a.active {
        background-color: #e74c3c;
        color: white;
        transform: translateX(5px);
      }
    </style>
  </body>
</html>
