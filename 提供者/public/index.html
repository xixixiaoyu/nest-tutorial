<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NestJS æä¾›è€…ï¼ˆProviderï¼‰æ•™å­¦æ¼”ç¤º</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        line-height: 1.6;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 40px;
      }

      .header h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.3rem;
        opacity: 0.9;
      }

      .section {
        background: white;
        border-radius: 15px;
        padding: 35px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .section:hover {
        transform: translateY(-5px);
      }

      .section-title {
        color: #667eea;
        font-size: 2rem;
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 15px;
        border-bottom: 3px solid #f1f5f9;
        padding-bottom: 15px;
      }

      .icon {
        width: 40px;
        height: 40px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .analogy-box {
        background: linear-gradient(135deg, #ffeaa7, #fab1a0);
        padding: 25px;
        border-radius: 12px;
        margin: 25px 0;
        border-left: 6px solid #e17055;
        box-shadow: 0 4px 15px rgba(225, 112, 85, 0.2);
      }

      .analogy-box h3 {
        color: #d63031;
        margin-bottom: 15px;
        font-size: 1.3rem;
      }

      .analogy-box p {
        font-size: 1.1rem;
        color: #2d3436;
      }

      .code-container {
        position: relative;
        margin: 25px 0;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      }

      .code-header {
        background: linear-gradient(135deg, #2d3748, #4a5568);
        color: white;
        padding: 15px 25px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .code-block {
        background: #1a202c;
        color: #e2e8f0;
        padding: 25px;
        overflow-x: auto;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        line-height: 1.8;
        font-size: 14px;
      }

      .highlight {
        background: rgba(129, 199, 132, 0.2);
        padding: 2px 6px;
        border-radius: 4px;
        color: #81c784;
        font-weight: bold;
      }

      .decorator {
        color: #ffd54f;
        font-weight: bold;
      }

      .keyword {
        color: #81c784;
        font-weight: bold;
      }

      .string {
        color: #ffab91;
      }

      .comment {
        color: #90a4ae;
        font-style: italic;
      }

      .tabs {
        display: flex;
        background: #f8f9fa;
        border-radius: 10px 10px 0 0;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .tab {
        padding: 15px 25px;
        cursor: pointer;
        background: #e9ecef;
        border: none;
        transition: all 0.3s ease;
        font-weight: 600;
        flex: 1;
        text-align: center;
      }

      .tab.active {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
      }

      .tab:hover:not(.active) {
        background: #dee2e6;
      }

      .tab-content {
        display: none;
        background: white;
        padding: 25px;
        border-radius: 0 0 10px 10px;
        border: 1px solid #e9ecef;
      }

      .tab-content.active {
        display: block;
      }

      .provider-types {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin: 30px 0;
      }

      .provider-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 25px;
        border-radius: 12px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
      }

      .provider-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
      }

      .provider-card h3 {
        margin-bottom: 15px;
        font-size: 1.4rem;
      }

      .provider-card p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .flow-diagram {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 30px 0;
        flex-wrap: wrap;
        gap: 15px;
      }

      .flow-item {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 20px 25px;
        border-radius: 12px;
        text-align: center;
        flex: 1;
        min-width: 180px;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        transition: transform 0.3s ease;
      }

      .flow-item:hover {
        transform: translateY(-5px);
      }

      .flow-arrow {
        font-size: 28px;
        color: #667eea;
        font-weight: bold;
      }

      .scope-comparison {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin: 30px 0;
      }

      .scope-card {
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 25px;
        transition: all 0.3s ease;
        background: #f8f9fa;
      }

      .scope-card:hover {
        border-color: #667eea;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        background: white;
      }

      .scope-card h4 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.3rem;
      }

      .scope-card p {
        margin-bottom: 8px;
        font-size: 1rem;
      }

      .scope-card .code-block {
        margin-top: 15px;
        font-size: 12px;
        padding: 15px;
      }

      .key-points {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin: 25px 0;
      }

      .key-points h3 {
        margin-bottom: 15px;
        font-size: 1.4rem;
      }

      .key-points ul {
        list-style: none;
        padding-left: 0;
      }

      .key-points li {
        margin-bottom: 10px;
        padding-left: 25px;
        position: relative;
      }

      .key-points li:before {
        content: 'âœ“';
        position: absolute;
        left: 0;
        font-weight: bold;
        color: #00b894;
      }

      .copy-btn {
        background: #48bb78;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
      }

      .copy-btn:hover {
        background: #38a169;
        transform: translateY(-2px);
      }

      .explanation-box {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        padding: 20px;
        margin: 20px 0;
        border-radius: 0 8px 8px 0;
      }

      .explanation-box h4 {
        color: #667eea;
        margin-bottom: 10px;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2.2rem;
        }

        .section {
          padding: 25px;
        }

        .section-title {
          font-size: 1.6rem;
          flex-direction: column;
          text-align: center;
          gap: 10px;
        }

        .flow-diagram {
          flex-direction: column;
        }

        .flow-arrow {
          transform: rotate(90deg);
        }

        .provider-types {
          grid-template-columns: 1fr;
        }

        .scope-comparison {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ—ï¸ NestJS æä¾›è€…ï¼ˆProviderï¼‰</h1>
        <p>åƒä¸“ä¸šå·¥åŒ ä¸€æ ·ä¸ºä½ çš„åº”ç”¨æä¾›æœåŠ¡</p>
      </div>

      <!-- æ¦‚å¿µä»‹ç» -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ’¡</span>
          ä»€ä¹ˆæ˜¯æä¾›è€…ï¼Ÿ
        </h2>

        <div class="analogy-box">
          <h3>ğŸ  æˆ¿å­å»ºé€ ç±»æ¯”</h3>
          <p>
            å¦‚æœæŠŠåº”ç”¨æ¯”ä½œä¸€åº§æˆ¿å­ï¼Œé‚£ä¹ˆæä¾›è€…å°±æ˜¯ç”µå·¥ã€æœ¨åŒ ã€æ°´ç®¡å·¥è¿™äº›å„å¸å…¶èŒçš„ä¸“ä¸šäººå£«ã€‚æ¯ä¸ªæä¾›è€…éƒ½æœ‰è‡ªå·±çš„ä¸“é•¿ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä¸ºåº”ç”¨æä¾›æœåŠ¡ã€‚
          </p>
        </div>

        <div class="explanation-box">
          <h4>æä¾›è€…çš„æœ¬è´¨</h4>
          <p>
            æä¾›è€…æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯ä»¥è¢«æ³¨å…¥åˆ°å…¶ä»–ç±»ä¸­çš„ç±»ã€‚å®ƒä»¬æ‰¿æ‹…ç€ä¸åŒçš„èŒè´£ï¼Œæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDependency
            Injectionï¼‰çš„æ–¹å¼è¢«"é€è¾¾"åˆ°éœ€è¦å®ƒä»¬çš„åœ°æ–¹ï¼Œè¿™è®©ä»£ç å˜å¾—æ›´åŠ æ¨¡å—åŒ–å’Œå¯æµ‹è¯•ã€‚
          </p>
        </div>

        <div class="provider-types">
          <div class="provider-card">
            <h3>ğŸ”§ æœåŠ¡ (Service)</h3>
            <p>å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æ“ä½œ</p>
          </div>
          <div class="provider-card">
            <h3>ğŸ—„ï¸ ä»“åº“ (Repository)</h3>
            <p>ä¸“é—¨è´Ÿè´£ä¸æ•°æ®åº“æ‰“äº¤é“</p>
          </div>
          <div class="provider-card">
            <h3>ğŸ­ å·¥å‚ (Factory)</h3>
            <p>è´Ÿè´£åˆ›å»ºå¤æ‚å¯¹è±¡</p>
          </div>
          <div class="provider-card">
            <h3>ğŸ› ï¸ è¾…åŠ©ç±» (Helper)</h3>
            <p>æä¾›å„ç§é€šç”¨åŠŸèƒ½</p>
          </div>
        </div>
      </div>

      <!-- åˆ›å»ºæœåŠ¡æ¼”ç¤º -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ±</span>
          åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæœåŠ¡
        </h2>

        <p style="font-size: 1.1rem; margin-bottom: 25px">
          è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®¡ç†çŒ«å’ªä¿¡æ¯çš„ä¾‹å­æ¥äº†è§£å¦‚ä½•åˆ›å»ºæœåŠ¡ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ª
          CatsService æ¥å¤„ç†æ‰€æœ‰å…³äºçŒ«å’ªçš„æ“ä½œï¼š
        </p>

        <div class="tabs">
          <button class="tab active" onclick="showTab('service-tab', this)">
            CatsService
          </button>
          <button class="tab" onclick="showTab('controller-tab', this)">
            CatsController
          </button>
          <button class="tab" onclick="showTab('module-tab', this)">
            CatsModule
          </button>
        </div>

        <div id="service-tab" class="tab-content active">
          <div class="code-container">
            <div class="code-header">
              cats.service.ts
              <button class="copy-btn" onclick="copyCode('service-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="service-code">
              <span class="keyword">import</span> {
              <span class="highlight">Injectable</span> }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;
              <span class="keyword">import</span> { Cat }
              <span class="keyword">from</span>
              <span class="string">'./interfaces/cat.interface'</span>;

              <span class="decorator">@Injectable()</span>
              <span class="comment">// è¿™ä¸ªè£…é¥°å™¨æ˜¯å…³é”®</span>
              <span class="keyword">export class</span>
              <span class="highlight">CatsService</span> {
              <span class="keyword">private readonly</span> cats: Cat[] = [];
              <span class="comment">// ç”¨æ•°ç»„æ¨¡æ‹Ÿæ•°æ®åº“</span>

              <span class="highlight">create</span>(cat: Cat) {
              <span class="keyword">this</span>.cats.push(cat);
              console.log(<span class="string">'ä¸€åªæ–°çŒ«å’ªåŠ å…¥äº†ï¼ç°åœ¨æœ‰'</span
              >, <span class="keyword">this</span>.cats.length,
              <span class="string">'åªçŒ«å’ªã€‚'</span>); }

              <span class="highlight">findAll</span>(): Cat[] {
              console.log(<span class="string">'æ­£åœ¨æŸ¥æ‰¾æ‰€æœ‰çŒ«å’ª...'</span>);
              <span class="keyword">return this</span>.cats; } }
            </div>
          </div>

          <div class="explanation-box">
            <h4>å…³é”®ç‚¹è§£æ</h4>
            <p>
              <strong>@Injectable()</strong> è£…é¥°å™¨ç›¸å½“äºå‘Šè¯‰ Nestï¼šCatsService
              è¿™ä¸ªç±»æ˜¯ä¸ªæä¾›è€…ï¼Œä½ å¯ä»¥ç®¡ç†å®ƒï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒ'æ³¨å…¥'ç»™åˆ«äººç”¨ã€‚
            </p>
          </div>
        </div>

        <div id="controller-tab" class="tab-content">
          <div class="code-container">
            <div class="code-header">
              cats.controller.ts
              <button class="copy-btn" onclick="copyCode('controller-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="controller-code">
              <span class="keyword">import</span> { Controller, Get, Post, Body
              } <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;
              <span class="keyword">import</span> { CreateCatDto }
              <span class="keyword">from</span>
              <span class="string">'./dto/create-cat.dto'</span>;
              <span class="keyword">import</span> { CatsService }
              <span class="keyword">from</span>
              <span class="string">'./cats.service'</span>;
              <span class="keyword">import</span> { Cat }
              <span class="keyword">from</span>
              <span class="string">'./interfaces/cat.interface'</span>;

              <span class="decorator">@Controller('cats')</span>
              <span class="keyword">export class</span>
              <span class="highlight">CatsController</span> {
              <span class="comment">// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ CatsService</span>
              <span class="keyword">constructor</span>(<span class="keyword"
                >private readonly</span
              >
              catsService: CatsService) {}

              <span class="decorator">@Post()</span>
              <span class="keyword">async</span>
              <span class="highlight">create</span>(<span class="decorator"
                >@Body()</span
              >
              createCatDto: CreateCatDto) {
              <span class="keyword">this</span
              >.catsService.create(createCatDto);
              <span class="keyword">return</span>
              <span class="string">'æˆåŠŸæ·»åŠ äº†ä¸€åªçŒ«å’ªï¼'</span>; }

              <span class="decorator">@Get()</span>
              <span class="keyword">async</span>
              <span class="highlight">findAll</span>(): Promise&lt;Cat[]&gt; {
              <span class="keyword">return this</span>.catsService.findAll(); }
              }
            </div>
          </div>

          <div class="explanation-box">
            <h4>ä¾èµ–æ³¨å…¥çš„é­”æ³•</h4>
            <p>
              è¿™é‡Œçš„å…³é”®æ˜¯æ„é€ å‡½æ•°ä¸­çš„
              <strong
                >constructor(private readonly catsService: CatsService)</strong
              >ã€‚ä½ åªéœ€è¦å£°æ˜éœ€è¦ä»€ä¹ˆç±»å‹çš„ä¾èµ–ï¼ŒNestJS
              å°±ä¼šè‡ªåŠ¨åˆ›å»ºå®ä¾‹å¹¶æ³¨å…¥è¿›æ¥ã€‚
            </p>
          </div>
        </div>

        <div id="module-tab" class="tab-content">
          <div class="code-container">
            <div class="code-header">
              cats.module.ts
              <button class="copy-btn" onclick="copyCode('module-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="module-code">
              <span class="keyword">import</span> { Module }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;
              <span class="keyword">import</span> { CatsController }
              <span class="keyword">from</span>
              <span class="string">'./cats.controller'</span>;
              <span class="keyword">import</span> { CatsService }
              <span class="keyword">from</span>
              <span class="string">'./cats.service'</span>;

              <span class="decorator">@Module({</span>
              controllers: [CatsController], providers: [<span class="highlight"
                >CatsService</span
              >], <span class="comment">// åœ¨è¿™é‡Œæ³¨å†ŒæœåŠ¡</span> exports:
              [CatsService],
              <span class="comment">// å¦‚æœå…¶ä»–æ¨¡å—éœ€è¦ä½¿ç”¨ï¼Œè®°å¾—å¯¼å‡º</span>
              <span class="decorator">})</span>
              <span class="keyword">export class</span>
              <span class="highlight">CatsModule</span> {}
            </div>
          </div>

          <div class="code-container">
            <div class="code-header">app.module.ts</div>
            <div class="code-block">
              <span class="keyword">import</span> { Module }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;
              <span class="keyword">import</span> { CatsModule }
              <span class="keyword">from</span>
              <span class="string">'./cats/cats.module'</span>;

              <span class="decorator">@Module({</span>
              imports: [<span class="highlight">CatsModule</span>],
              <span class="comment">// å¯¼å…¥ç‰¹æ€§æ¨¡å—</span>
              <span class="decorator">})</span>
              <span class="keyword">export class</span>
              <span class="highlight">AppModule</span> {}
            </div>
          </div>

          <div class="explanation-box">
            <h4>æ³¨å†Œæµç¨‹</h4>
            <p>
              å½“ Nest åˆå§‹åŒ– CatsController æ—¶ï¼Œå‘ç°å®ƒéœ€è¦
              CatsServiceï¼Œä¾èµ–æ³¨å…¥ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æ‰¾åˆ°å·²æ³¨å†Œçš„æä¾›è€…ï¼Œå®ä¾‹åŒ–å®ƒå¹¶æ³¨å…¥åˆ°æ§åˆ¶å™¨ä¸­ã€‚
            </p>
          </div>
        </div>
      </div>

      <!-- ä¾èµ–æ³¨å…¥æµç¨‹ -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ”„</span>
          ä¾èµ–æ³¨å…¥æµç¨‹
        </h2>

        <div class="flow-diagram">
          <div class="flow-item">
            <strong>1. æ³¨å†Œæä¾›è€…</strong><br />
            @Injectable()
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-item">
            <strong>2. æ¨¡å—å£°æ˜</strong><br />
            providers: []
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-item">
            <strong>3. æ„é€ å‡½æ•°æ³¨å…¥</strong><br />
            constructor()
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-item">
            <strong>4. è‡ªåŠ¨å®ä¾‹åŒ–</strong><br />
            ä½¿ç”¨æœåŠ¡
          </div>
        </div>

        <div class="key-points">
          <h3>ğŸ¯ å…³é”®è¦ç‚¹</h3>
          <ul>
            <li>ä½¿ç”¨ @Injectable() è£…é¥°å™¨æ ‡è®°æä¾›è€…</li>
            <li>åœ¨æ¨¡å—çš„ providers æ•°ç»„ä¸­æ³¨å†Œ</li>
            <li>é€šè¿‡æ„é€ å‡½æ•°å‚æ•°å£°æ˜ä¾èµ–</li>
            <li>NestJS è‡ªåŠ¨å¤„ç†å®ä¾‹åŒ–å’Œæ³¨å…¥</li>
          </ul>
        </div>
      </div>

      <!-- å¼‚æ­¥æä¾›è€… -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">â³</span>
          å¼‚æ­¥æä¾›è€…ï¼šå¤„ç†å¤æ‚çš„åˆå§‹åŒ–
        </h2>

        <p style="font-size: 1.1rem; margin-bottom: 25px">
          æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šä½ çš„åº”ç”¨éœ€è¦åœ¨å¯åŠ¨æ—¶è¿æ¥æ•°æ®åº“ï¼Œåªæœ‰è¿æ¥æˆåŠŸåï¼Œå…¶ä»–æœåŠ¡æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚å¼‚æ­¥æä¾›è€…çš„è§£å†³æ–¹æ¡ˆéå¸¸ç›´è§‚ï¼Œå®ƒä½¿ç”¨
          async/await é…åˆ useFactoryï¼š
        </p>

        <div class="code-container">
          <div class="code-header">
            å¼‚æ­¥æ•°æ®åº“è¿æ¥æä¾›è€…
            <button class="copy-btn" onclick="copyCode('async-code')">
              å¤åˆ¶ä»£ç 
            </button>
          </div>
          <div class="code-block" id="async-code">
            <span class="keyword">import</span> { DataSource }
            <span class="keyword">from</span>
            <span class="string">'typeorm'</span>;

            <span class="comment">// åœ¨æ¨¡å—çš„ providers ä¸­é…ç½®</span>
            { provide: <span class="string">'DATABASE_CONNECTION'</span>,
            <span class="highlight">useFactory</span>:
            <span class="keyword">async</span> (): Promise&lt;DataSource&gt;
            =&gt; { <span class="keyword">const</span> dataSource =
            <span class="keyword">new</span> DataSource({ type:
            <span class="string">'postgres'</span>, host:
            <span class="string">'localhost'</span>, port:
            <span class="highlight">5432</span>, database:
            <span class="string">'myapp'</span>,
            <span class="comment">// å…¶ä»–é…ç½®...</span>
            });

            <span class="keyword">await</span> dataSource.initialize();
            console.log(<span class="string">'æ•°æ®åº“è¿æ¥å»ºç«‹æˆåŠŸï¼'</span>);
            <span class="keyword">return</span> dataSource; }, }
          </div>
        </div>

        <div class="explanation-box">
          <h4>å¼‚æ­¥æä¾›è€…çš„ä¼˜åŠ¿</h4>
          <p>
            Nest ä¼šæ™ºèƒ½åœ°æ£€æµ‹åˆ°ä½ çš„ useFactory å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œç„¶åè€å¿ƒç­‰å¾…
            Promise
            å®Œæˆã€‚åªæœ‰å½“æ•°æ®åº“è¿æ¥çœŸæ­£å»ºç«‹åï¼Œé‚£äº›ä¾èµ–è¿™ä¸ªè¿æ¥çš„æœåŠ¡æ‰ä¼šå¼€å§‹å®ä¾‹åŒ–ã€‚
          </p>
        </div>

        <div class="code-container">
          <div class="code-header">åœ¨æœåŠ¡ä¸­æ³¨å…¥ä½¿ç”¨</div>
          <div class="code-block">
            <span class="keyword">import</span> { Injectable, Inject }
            <span class="keyword">from</span>
            <span class="string">'@nestjs/common'</span>;
            <span class="keyword">import</span> { DataSource }
            <span class="keyword">from</span>
            <span class="string">'typeorm'</span>;

            <span class="decorator">@Injectable()</span>
            <span class="keyword">export class</span>
            <span class="highlight">UserService</span> {
            <span class="keyword">constructor</span>(
            <span class="decorator">@Inject('DATABASE_CONNECTION')</span>
            <span class="keyword">private readonly</span> dataSource: DataSource
            ) {}

            <span class="keyword">async</span>
            <span class="highlight">findAllUsers</span>() {
            <span class="keyword">const</span> userRepository =
            <span class="keyword">this</span>.dataSource.getRepository(User);
            <span class="keyword">return await</span> userRepository.find(); }

            <span class="keyword">async</span>
            <span class="highlight">createUser</span>(userData: CreateUserDto) {
            <span class="keyword">const</span> userRepository =
            <span class="keyword">this</span>.dataSource.getRepository(User);
            <span class="keyword">const</span> user =
            userRepository.create(userData);
            <span class="keyword">return await</span> userRepository.save(user);
            } }
          </div>
        </div>

        <div class="code-container">
          <div class="code-header">å¸¦ä¾èµ–çš„å·¥å‚å‡½æ•°</div>
          <div class="code-block">
            <span class="keyword">import</span> { Module }
            <span class="keyword">from</span>
            <span class="string">'@nestjs/common'</span>;
            <span class="keyword">import</span> { ConfigModule, ConfigService }
            <span class="keyword">from</span>
            <span class="string">'@nestjs/config'</span>;

            <span class="decorator">@Module({</span>
            imports: [ConfigModule], providers: [ { provide:
            <span class="string">'DATABASE_CONNECTION'</span>,
            <span class="highlight">useFactory</span>:
            <span class="keyword">async</span> (configService: ConfigService)
            =&gt; {
            <span class="comment">// å¼‚æ­¥åˆå§‹åŒ–é€»è¾‘</span>
            <span class="keyword">const</span> dbConfig =
            configService.get(<span class="string">'database'</span>);
            <span class="comment">// ... åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</span>
            },
            <span class="highlight">inject</span>: [ConfigService],
            <span class="comment">// æ³¨å…¥ä¾èµ–</span> }, UserService, ], exports:
            [<span class="string">'DATABASE_CONNECTION'</span>],
            <span class="decorator">})</span>
            <span class="keyword">export class</span>
            <span class="highlight">DatabaseModule</span> {}
          </div>
        </div>
      </div>

      <!-- ä½œç”¨åŸŸ -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ¯</span>
          æä¾›è€…ä½œç”¨åŸŸ
        </h2>

        <p style="font-size: 1.1rem; margin-bottom: 25px">
          NestJS
          ä¸­çš„æä¾›è€…é»˜è®¤é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼ˆæ•´ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªå®ä¾‹ï¼‰ï¼Œä½†å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ä½œç”¨åŸŸï¼š
        </p>

        <div class="scope-comparison">
          <div class="scope-card">
            <h4>ğŸ”„ DEFAULT (å•ä¾‹)</h4>
            <p><strong>æ€§èƒ½ï¼š</strong>æœ€ä¼˜</p>
            <p><strong>å†…å­˜ï¼š</strong>æœ€ä½</p>
            <p><strong>é€‚ç”¨ï¼š</strong>æ— çŠ¶æ€æœåŠ¡ã€å·¥å…·ç±»ã€æ•°æ®åº“è¿æ¥</p>
            <div class="code-block">
              <span class="decorator">@Injectable()</span>
              <span class="comment">// é»˜è®¤å•ä¾‹</span>
              <span class="keyword">export class</span>
              <span class="highlight">UserService</span> {
              <span class="keyword">private</span> users: User[] = [];

              <span class="comment">// æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªæœ‰ä¸€ä¸ªå®ä¾‹</span>
              <span class="comment">// æ‰€æœ‰æ¨¡å—å…±äº«åŒä¸€ä¸ªå®ä¾‹</span>
              <span class="keyword">constructor</span>() { console.log(<span
                class="string"
                >'UserService å®ä¾‹åˆ›å»º'</span
              >); } }
            </div>
          </div>

          <div class="scope-card">
            <h4>ğŸ“ REQUEST (è¯·æ±‚ä½œç”¨åŸŸ)</h4>
            <p><strong>æ€§èƒ½ï¼š</strong>ä¸­ç­‰</p>
            <p><strong>å†…å­˜ï¼š</strong>ä¸­ç­‰</p>
            <p><strong>é€‚ç”¨ï¼š</strong>ç”¨æˆ·è®¤è¯ã€è¯·æ±‚æ—¥å¿—ã€è¯·æ±‚ä¸Šä¸‹æ–‡</p>
            <div class="code-block">
              <span class="keyword">import</span> { Injectable, Scope }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;

              <span class="decorator"
                >@Injectable({ scope: Scope.REQUEST })</span
              >
              <span class="keyword">export class</span>
              <span class="highlight">RequestScopedService</span> {
              <span class="keyword">private</span> requestData: any = {};

              <span class="comment">// æ¯ä¸ª HTTP è¯·æ±‚åˆ›å»ºæ–°å®ä¾‹</span>
              <span class="comment">// é€‚åˆå­˜å‚¨è¯·æ±‚ç‰¹æœ‰çš„ä¿¡æ¯</span>
              <span class="keyword">constructor</span>() { console.log(<span
                class="string"
                >'RequestScopedService å®ä¾‹åˆ›å»º'</span
              >); } }
            </div>
          </div>

          <div class="scope-card">
            <h4>âš¡ TRANSIENT (ç¬æ€)</h4>
            <p><strong>æ€§èƒ½ï¼š</strong>è¾ƒå·®</p>
            <p><strong>å†…å­˜ï¼š</strong>è¾ƒé«˜</p>
            <p><strong>é€‚ç”¨ï¼š</strong>éœ€è¦å®Œå…¨éš”ç¦»çŠ¶æ€çš„ç‰¹æ®Šåœºæ™¯</p>
            <div class="code-block">
              <span class="keyword">import</span> { Injectable, Scope }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;

              <span class="decorator"
                >@Injectable({ scope: Scope.TRANSIENT })</span
              >
              <span class="keyword">export class</span>
              <span class="highlight">TransientService</span> {
              <span class="keyword">private</span> instanceId = Math.random();

              <span class="comment">// æ¯æ¬¡æ³¨å…¥éƒ½åˆ›å»ºæ–°å®ä¾‹</span>
              <span class="comment">// å®Œå…¨ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†</span>
              <span class="keyword">constructor</span>() { console.log(<span
                class="string"
                >`TransientService å®ä¾‹åˆ›å»ºï¼ŒID: ${this.instanceId}`</span
              >); } }
            </div>
          </div>
        </div>
      </div>

      <!-- é«˜çº§ç‰¹æ€§ -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸš€</span>
          æä¾›è€…çš„è¿›é˜¶ç©æ³•
        </h2>

        <div class="tabs">
          <button class="tab active" onclick="showTab('optional-tab', this)">
            å¯é€‰ä¾èµ–
          </button>
          <button class="tab" onclick="showTab('property-tab', this)">
            å±æ€§æ³¨å…¥
          </button>
          <button class="tab" onclick="showTab('dynamic-tab', this)">
            åŠ¨æ€è·å–
          </button>
        </div>

        <div id="optional-tab" class="tab-content active">
          <h3>@Optional() å¯é€‰ä¾èµ–</h3>
          <p style="margin-bottom: 20px">
            æœ‰æ—¶æŸäº›ä¾èµ–ä¸æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥ä½¿ç”¨ @Optional() è£…é¥°å™¨ï¼š
          </p>
          <div class="code-container">
            <div class="code-header">
              å¯é€‰ä¾èµ–ç¤ºä¾‹
              <button class="copy-btn" onclick="copyCode('optional-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="optional-code">
              <span class="keyword">import</span> { Injectable, Optional }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;

              <span class="decorator">@Injectable()</span>
              <span class="keyword">export class</span>
              <span class="highlight">AppService</span> {
              <span class="keyword">constructor</span>(
              <span class="decorator">@Optional()</span>
              <span class="keyword">private readonly</span> analyticsService?:
              AnalyticsService ) {
              <span class="comment">// analyticsService å¯èƒ½ä¸º undefined</span>
              <span class="keyword">if</span> (<span class="keyword">this</span
              >.analyticsService) {
              <span class="keyword">this</span>.analyticsService.track(<span
                class="string"
                >'AppService initialized'</span
              >); } }

              <span class="highlight">doSomething</span>() {
              <span class="comment">// ä½¿ç”¨å‰éœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨</span>
              <span class="keyword">this</span>.analyticsService?.track(<span
                class="string"
                >'Action performed'</span
              >); } }
            </div>
          </div>
          <div class="explanation-box">
            <h4>ä½¿ç”¨åœºæ™¯</h4>
            <p>
              è¿™åœ¨å¼€å‘æ’ä»¶ç³»ç»Ÿæˆ–å¯é€‰åŠŸèƒ½æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚å½“æŸä¸ªä¾èµ–ä¸å­˜åœ¨æ—¶ï¼Œåº”ç”¨ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚
            </p>
          </div>
        </div>

        <div id="property-tab" class="tab-content">
          <h3>@Inject() å±æ€§æ³¨å…¥</h3>
          <p style="margin-bottom: 20px">
            é™¤äº†æ„é€ å‡½æ•°æ³¨å…¥ï¼ŒNest ä¹Ÿæ”¯æŒå±æ€§æ³¨å…¥ï¼š
          </p>
          <div class="code-container">
            <div class="code-header">
              å±æ€§æ³¨å…¥ç¤ºä¾‹
              <button class="copy-btn" onclick="copyCode('property-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="property-code">
              <span class="keyword">import</span> { Injectable, Inject }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/common'</span>;

              <span class="decorator">@Injectable()</span>
              <span class="keyword">export class</span>
              <span class="highlight">CatsService</span> {
              <span class="decorator">@Inject(ConfigService)</span>
              <span class="keyword">private readonly</span> configService:
              ConfigService;

              <span class="highlight">getSettings</span>() {
              <span class="keyword">return this</span>.configService.get(<span
                class="string"
                >'cats'</span
              >); } }
            </div>
          </div>
          <div class="explanation-box">
            <h4>æ¨èåšæ³•</h4>
            <p>
              ä¸è¿‡ï¼Œé€šå¸¸è¿˜æ˜¯æ¨èç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼Œå› ä¸ºä¾èµ–å…³ç³»æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´ä¾¿äºæµ‹è¯•ã€‚
            </p>
          </div>
        </div>

        <div id="dynamic-tab" class="tab-content">
          <h3>ModuleRef åŠ¨æ€è·å–å®ä¾‹</h3>
          <p style="margin-bottom: 20px">
            æœ‰æ—¶éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–æä¾›è€…å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ ModuleRefï¼š
          </p>
          <div class="code-container">
            <div class="code-header">
              åŠ¨æ€è·å–æœåŠ¡å®ä¾‹
              <button class="copy-btn" onclick="copyCode('dynamic-code')">
                å¤åˆ¶ä»£ç 
              </button>
            </div>
            <div class="code-block" id="dynamic-code">
              <span class="keyword">import</span> { Injectable, ModuleRef }
              <span class="keyword">from</span>
              <span class="string">'@nestjs/core'</span>;
              <span class="keyword">import</span> { UserService }
              <span class="keyword">from</span>
              <span class="string">'../user/user.service'</span>;
              <span class="keyword">import</span> { LoggerService }
              <span class="keyword">from</span>
              <span class="string">'../logger/logger.service'</span>;

              <span class="decorator">@Injectable()</span>
              <span class="keyword">export class</span>
              <span class="highlight">DynamicService</span> {
              <span class="keyword">constructor</span>(<span class="keyword"
                >private</span
              >
              moduleRef: ModuleRef) {}

              <span class="keyword">async</span>
              <span class="highlight">getUserData</span>(userId:
              <span class="keyword">string</span>) {
              <span class="comment">// åŠ¨æ€è·å–ç”¨æˆ·æœåŠ¡</span>
              <span class="keyword">const</span> userService =
              <span class="keyword">this</span>.moduleRef.get(UserService);

              <span class="comment"
                >// è·å–è¯·æ±‚èŒƒå›´çš„æ—¥å¿—æœåŠ¡ï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯æ–°å®ä¾‹ï¼‰</span
              >
              <span class="keyword">const</span> logger =
              <span class="keyword">await this</span
              >.moduleRef.resolve(LoggerService); logger.log(<span
                class="string"
                >`Getting user data for ${userId}`</span
              >);
              <span class="keyword">return</span> userService.findById(userId);
              }

              <span class="keyword">async</span>
              <span class="highlight">getServiceByName</span>(serviceName:
              <span class="keyword">string</span>) {
              <span class="keyword">try</span> {
              <span class="comment">// æ ¹æ®å­—ç¬¦ä¸² token åŠ¨æ€è·å–æœåŠ¡</span>
              <span class="keyword">const</span> service =
              <span class="keyword">this</span>.moduleRef.get(serviceName, {
              strict: <span class="keyword">false</span> });
              <span class="keyword">return</span> service; }
              <span class="keyword">catch</span> (error) { console.log(<span
                class="string"
                >`Service ${serviceName} not found`</span
              >); <span class="keyword">return null</span>; } } }
            </div>
          </div>
        </div>
      </div>

      <!-- è‡ªå®šä¹‰æä¾›è€… -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ¨</span>
          è‡ªå®šä¹‰æä¾›è€…
        </h2>

        <p style="font-size: 1.1rem; margin-bottom: 25px">
          Nest ä¸ä»…æ”¯æŒæä¾›ç±»ä½œä¸º
          Providerï¼Œè¿˜å¯ä»¥æä¾›æ™®é€šå€¼ã€å·¥å‚å‡½æ•°ï¼ˆåŒæ­¥æˆ–å¼‚æ­¥ï¼‰ã€ç°æœ‰å®ä¾‹ç­‰ï¼Œè¿™æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼š
        </p>

        <div class="code-container">
          <div class="code-header">
            å„ç§è‡ªå®šä¹‰æä¾›è€…ç¤ºä¾‹
            <button
              class="copy-btn"
              onclick="copyCode('custom-providers-code')"
            >
              å¤åˆ¶ä»£ç 
            </button>
          </div>
          <div class="code-block" id="custom-providers-code">
            <span class="keyword">import</span> { Module }
            <span class="keyword">from</span>
            <span class="string">'@nestjs/common'</span>;

            <span class="decorator">@Module({</span>
            providers: [
            <span class="comment">// 1. æ™®é€šå€¼æä¾›è€…</span>
            { provide: <span class="string">'APP_CONFIG'</span>,
            <span class="highlight">useValue</span>: { apiUrl:
            <span class="string">'https://api.example.com'</span>, timeout:
            <span class="highlight">5000</span>, retries:
            <span class="highlight">3</span>
            } },

            <span class="comment">// 2. å·¥å‚å‡½æ•°æä¾›è€…</span>
            { provide: <span class="string">'LOGGER'</span>,
            <span class="highlight">useFactory</span>: (configService:
            ConfigService) =&gt; { <span class="keyword">const</span> logLevel =
            configService.get(<span class="string">'LOG_LEVEL'</span>);
            <span class="keyword">return new</span> Logger(logLevel); }, inject:
            [ConfigService] },

            <span class="comment">// 3. ç±»åˆ«åæä¾›è€…</span>
            { provide: <span class="string">'IUserService'</span>,
            <span class="highlight">useClass</span>: UserService },

            <span class="comment">// 4. ç°æœ‰å®ä¾‹æä¾›è€…</span>
            { provide: <span class="string">'CACHE_MANAGER'</span>,
            <span class="highlight">useExisting</span>: CacheService } ]
            <span class="decorator">})</span>
            <span class="keyword">export class</span>
            <span class="highlight">AppModule</span> {}
          </div>
        </div>

        <div class="key-points">
          <h3>ğŸ¯ è‡ªå®šä¹‰æä¾›è€…çš„ä¼˜åŠ¿</h3>
          <ul>
            <li><strong>useValueï¼š</strong>æä¾›é™æ€å€¼æˆ–é…ç½®å¯¹è±¡</li>
            <li><strong>useFactoryï¼š</strong>åŠ¨æ€åˆ›å»ºå¤æ‚å¯¹è±¡ï¼Œæ”¯æŒä¾èµ–æ³¨å…¥</li>
            <li><strong>useClassï¼š</strong>æä¾›ç±»çš„åˆ«åï¼Œä¾¿äºæ¥å£ç¼–ç¨‹</li>
            <li><strong>useExistingï¼š</strong>åˆ›å»ºç°æœ‰æä¾›è€…çš„åˆ«å</li>
          </ul>
        </div>
      </div>

      <!-- æ€»ç»“ -->
      <div class="section">
        <h2 class="section-title">
          <span class="icon">ğŸ“š</span>
          å­¦ä¹ æ€»ç»“
        </h2>

        <div class="key-points">
          <h3>ğŸ“ æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>
          <ul>
            <li>
              <strong>æä¾›è€…æœ¬è´¨ï¼š</strong
              >å¯è¢«æ³¨å…¥çš„ç±»ï¼Œæ‰¿æ‹…ä¸åŒèŒè´£ï¼ˆæœåŠ¡ã€ä»“åº“ã€å·¥å‚ã€è¾…åŠ©ç±»ï¼‰
            </li>
            <li>
              <strong>@Injectable()ï¼š</strong>æ ‡è®°ç±»ä¸ºæä¾›è€…ï¼Œå‘Šè¯‰ Nest
              å¯ä»¥ç®¡ç†å’Œæ³¨å…¥
            </li>
            <li>
              <strong>ä¾èµ–æ³¨å…¥ï¼š</strong>é€šè¿‡æ„é€ å‡½æ•°å‚æ•°å£°æ˜ä¾èµ–ï¼ŒNest
              è‡ªåŠ¨å®ä¾‹åŒ–å’Œæ³¨å…¥
            </li>
            <li>
              <strong>æ¨¡å—æ³¨å†Œï¼š</strong>åœ¨ @Module çš„ providers
              æ•°ç»„ä¸­æ³¨å†Œæä¾›è€…
            </li>
            <li>
              <strong>ä½œç”¨åŸŸæ§åˆ¶ï¼š</strong
              >DEFAULTï¼ˆå•ä¾‹ï¼‰ã€REQUESTï¼ˆè¯·æ±‚çº§ï¼‰ã€TRANSIENTï¼ˆç¬æ€ï¼‰
            </li>
            <li>
              <strong>å¼‚æ­¥æä¾›è€…ï¼š</strong>ä½¿ç”¨ useFactory å¤„ç†å¤æ‚çš„å¼‚æ­¥åˆå§‹åŒ–
            </li>
            <li>
              <strong>é«˜çº§ç‰¹æ€§ï¼š</strong
              >å¯é€‰ä¾èµ–ã€å±æ€§æ³¨å…¥ã€åŠ¨æ€è·å–ã€è‡ªå®šä¹‰æä¾›è€…
            </li>
          </ul>
        </div>

        <div class="analogy-box">
          <h3>ğŸ—ï¸ æœ€ç»ˆç±»æ¯”</h3>
          <p>
            æä¾›è€…å°±åƒæ˜¯ä¸€ä¸ªä¸“ä¸šçš„æœåŠ¡å›¢é˜Ÿï¼Œæ¯ä¸ªæˆå‘˜éƒ½æœ‰è‡ªå·±çš„ä¸“é•¿ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥è¿™ä¸ª"è°ƒåº¦ç³»ç»Ÿ"ï¼Œå½“æŸä¸ªåœ°æ–¹éœ€è¦ç‰¹å®šæœåŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ´¾é£åˆé€‚çš„ä¸“å®¶åˆ°ç°åœºã€‚è¿™ç§æ¨¡å¼è®©ä½ çš„åº”ç”¨æ¶æ„æ¸…æ™°ã€æ˜“äºæµ‹è¯•å’Œç»´æŠ¤ã€‚
          </p>
        </div>
      </div>
    </div>

    <script>
      // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
      function showTab(tabId, element) {
        // è·å–å½“å‰æ ‡ç­¾ç»„
        const tabContainer = element.parentElement;
        const contentContainer = tabContainer.nextElementSibling;

        // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
        const tabContents =
          contentContainer.parentElement.querySelectorAll('.tab-content');
        tabContents.forEach((content) => content.classList.remove('active'));

        // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ´»åŠ¨çŠ¶æ€
        const tabs = tabContainer.querySelectorAll('.tab');
        tabs.forEach((tab) => tab.classList.remove('active'));

        // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
        document.getElementById(tabId).classList.add('active');
        element.classList.add('active');
      }

      // å¤åˆ¶ä»£ç åŠŸèƒ½
      function copyCode(elementId) {
        const codeElement = document.getElementById(elementId);
        const text = codeElement.textContent;

        // ä½¿ç”¨ç°ä»£ API å¤åˆ¶æ–‡æœ¬
        if (navigator.clipboard) {
          navigator.clipboard
            .writeText(text)
            .then(() => {
              showCopySuccess();
            })
            .catch(() => {
              fallbackCopyTextToClipboard(text);
            });
        } else {
          fallbackCopyTextToClipboard(text);
        }
      }

      // å¤‡ç”¨å¤åˆ¶æ–¹æ³•
      function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.top = '0';
        textArea.style.left = '0';
        textArea.style.position = 'fixed';

        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
          document.execCommand('copy');
          showCopySuccess();
        } catch (err) {
          console.error('å¤åˆ¶å¤±è´¥:', err);
        }

        document.body.removeChild(textArea);
      }

      // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
      function showCopySuccess() {
        // åˆ›å»ºæç¤ºå…ƒç´ 
        const toast = document.createElement('div');
        toast.textContent = 'âœ… ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
        toast.style.cssText = `
                                        position: fixed;
                                        top: 20px;
                                        right: 20px;
                                        background: #48bb78;
                                        color: white;
                                        padding: 12px 20px;
                                        border-radius: 8px;
                                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                        z-index: 1000;
                                        font-weight: 500;
                                        transition: all 0.3s ease;
                                    `;

        document.body.appendChild(toast);

        // 3ç§’åç§»é™¤æç¤º
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }

      // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function () {
        // ä¸ºæ‰€æœ‰ä»£ç å—æ·»åŠ è¡Œå·ï¼ˆå¯é€‰ï¼‰
        const codeBlocks = document.querySelectorAll('.code-block');
        codeBlocks.forEach((block) => {
          block.style.position = 'relative';
        });

        // æ·»åŠ å¹³æ»‘æ»šåŠ¨
        document.documentElement.style.scrollBehavior = 'smooth';
      });
    </script>
  </body>
</html>
